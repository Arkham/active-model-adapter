language: node_js
node_js:
- '0.12'
sudo: false
cache:
  directories:
  - node_modules
env:
  matrix:
  - EMBER_TRY_SCENARIO=default
  - EMBER_TRY_SCENARIO=ember-release
  - EMBER_TRY_SCENARIO=ember-beta
  - EMBER_TRY_SCENARIO=ember-canary
  global:
    - GITHUB_USER=tomster-strudel
    - secure: ZuEENBDKyFtqjp7em/ajkoj+CMOwtMCp20vv7de+jguGvQwDbrKRcQZ+Ai87bGTjoyolXFlXtFFb+4aqiqY1JeNj8HA+OTLVaad0WxxSbW/+Oz/1UPoMkbqkfdepqH3lXjo2lCnJbDUa5aI8Em0W0Iuq1YX3iSEzi+b1Bi4A8ZM50nIgTIQxHeMKBvAKBuz0QUhpEhFFbdlD0BMUD+fbUaaBQ2kxiXGISGCRohkaqhDD68wQhVYdlNBn+Z2yp/YM0+kUZp9FqX8XA47vJkVKBLPydMp0x9GhOfF2FPnqksl0M1LTiuvMTNazOwXkNSoLV8aQxS8GCtVi3RhpEkK8KUF/+rX0AG6TZPQTaQ+yVaXb2+7UqpyUs630TZGIe2nFfWeBCYw/Hw+hjD9EQhCc8r6CinCGYd2diiszGDRQYItM5VZDuBwQu0WxDVOj+BDRFFHoYn7am3hFhX2ERsHllBpXN5eZZC1peVwHIsCRsHIiyC77vxQl+BBqAljUHoAg5TEB+K9exCnp4G73eImDwJvBrPuLpKVWT6Zxh7N8ItXUHM/lX0VWor8fbILGSQ2v3YEzzrITDHmEBoc89lAms6Bkva+tw/OpM6ZPPi/Xmxm+otsTNHKOEw5G+tTnUIetRSqWHjSv7Q0PN2v7MLcVuUSL8bedIRmyz9jeCmzlTX0=
matrix:
  fast_finish: true
  allow_failures:
  - env: EMBER_TRY_SCENARIO=ember-canary
before_install:
- export PATH=/usr/local/phantomjs-2.0.0/bin:$PATH
- npm config set spin false
- npm install -g npm@^2
install:
- npm install -g bower
- npm install
- bower install
script:
- ember try $EMBER_TRY_SCENARIO test
after_success:
- ember try:reset
- ember build --environment=production
- bin/release
- rm -rf active-model-adapter-dist
before_deploy:
- '[[ -d "./dist" ]] || ember build --environment=production'
deploy:
  - provider: rubygems
    gemspec: active-model-adapter-source.gemspec
    on:
      tags: true
    api_key:
      secure: "X7734CGXXQMAtjScj5Vs+T4G+Axa5FzROKGQM2sP255TUiCnGe3SzPJHmzrkrE/XNSs62tmeHAKCt/dEqJVOpM46Ain9aI+/ETuadMF/ihnS4VnYqzN1+MvhbAvxB++xfb/f+Zw/n7kotH7fIsGdUsaLBiClli/J8/kojh7ueoEVFrUEZIhZ6zl8jCNSGxP7MlQ+IDBXOlNpyRpxnkiPTXUxcoFJjk9lu3+AcX16nU06p4+uscmnboGKZr0cSooRmWBiSRS7GIYBl38bkI8JE20ZCrLe8JdbSgWoA4jpRSgEL6ZuDv7QcOk02pPjii1iEK41gMQgmcun3BEfd3TuJpQPaEv23XCjpCp1xFpG5hKVEXimSjsYFab7Qr8DOLoW3goeoxzZrbbsY1cVEwcMXE2j8433i6dizateQNAwMMTpWQLoRtj83YMxmLcZbouGjTLJavli5Flyin0+lfXXIz/UQb0Hp9xeb70DWRYY6xttApAgay86SBtF3HbTqUMD2I8iEZyqCIEIqzdD10LrL0ZpYu86pFHqj1mrlLXbR78sKcFrwfc02DiQmsDRcVmpwHa2RcpWFIXpa2U2fcmkXuEK7dGdV5MoNujFergbv4KqMW+16ny5FKsCt/G/40obCPNTW7m+7Bww9N3tyD2OJgvWn2/54IT6ONzVwDJH/QQ="
  - provider: npm
    email: stanley+ember-data@stan.li
    on:
      tags: true
    api_key:
      secure: "lRQNsqu6n6Lc1MnqFRZeWc1kz2TlN2p1dW/LrPznRIe3uohqcCr3gk5aznOut+fylu2fnF2XGdmMv+BlRLkMFFMKKBPMl6BD/qyndMP5gQVOj4R+pN3fW/Cq+sC9146sbE98vKVajeQKlVk6WXQVDY/KEzNqCTXgmieWRBy6aSY35POok2ihrTYZgAKXgn5G73KwcNSfTnd/YS7iLWhVWDd4kWrAm5OF7lPLiZB9n7oZ6aiRt5RM3fX1c1Y3fQL+cMEzGFkPua2xjhaA2H7WHSgYy9H7q65FJl/hRQuYSMOjJCkYXZ6GCZspZIq6xam4ZrJiIO3W/rGs/GDNsulseUkCOyrQEpU+DZJveCL1V/MmsCvMlojjOsdKwTb0KqhAhgsjhQ6ahPOm1/uQLvD5ShQleZwTTa3P6QXsZm3KYKNA4MfS6ao7GkCcBkMbQiDRt9o8O+jDDfUNheUJ+2ZYudkOAn+ZoA2aTMBVyimHr0sUJnN0bmEjxw/7ZNUp1bPEJ7kS1OcLqlwzgkvKoNF7iTj3/54m37+GuLdvoiDKF328drXPyrgHNzsvB3uZmSGFNh6Yesg0k6KGybo64prxpzLipZJHhd7btvTNavj9fZhPmkR+0SQcqXTtNDW1g4q5HRP00Sbtex1NTHVPklMqKC+m9aHJb2DOEytCx9bAilM="
    clean_up: false
